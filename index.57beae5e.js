var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},r=t.parcelRequire4f2e;null==r&&((r=function(t){if(t in e)return e[t].exports;if(t in n){var r=n[t];delete n[t];var o={id:t,exports:{}};return e[t]=o,r.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){n[t]=e},t.parcelRequire4f2e=r);var o=r("1TPJ0"),a=r("j7l8X"),i=r("3oXzi"),s=r("41Xpz"),c=r("bipNC"),l=(c=r("bipNC"),r("74Aiq"));r("cj99M"),r("fmbH8");a=r("j7l8X"),i=r("3oXzi");let u,f;function d({page:t=1,total_pages:e}){u=t,f=e;!function(t,e,n){const r=t.map((t=>0===t?'<li class = "pagination__item"><div class = "empryBox">...</div></li>':1===t?`<li class = "pagination__item"><button type="button" class = "${t===e?"current":""} firstPage" data-btn="${t}">${t}</button></li>`:t===n?`<li class = "pagination__item"><button type="button" class = "${t===e?"current":""} lastPage" data-btn="${t}">${t}</button></li>`:`<li class = "pagination__item"><button type="button" class = "${t===e?"current":""}" data-btn="${t}">${t}</button></li>`));r.unshift('<li class = "pagination__item"><button type="button" class = "left-arrow" data-btn="<"></button></li>'),r.push('<li class = "pagination__item"><button type="button" class = "right-arrow" data-btn=">"></button></li>'),g.innerHTML=r.join(""),g.dataset.lastpage=n}(function(t,e){const n=[];for(let r=t-2;r<=t+2;r+=1)r>=1&&r<=e&&n.push(r);2===n[0]&&n.unshift(1);n[0]>3&&n.unshift(1,0);n[n.length-1]<e&&n.push(0,e);n[n.length-1]===e-2&&n.push(e-1);n[n.length-1]===e-3&&n.push(e-2);return n}(u,f),u,f)}const g=document.querySelector(".pagination");function p(){window.scrollTo({top:0,behavior:"smooth"})}function v(t){try{localStorage.setItem("queryType",JSON.stringify({queryType:t}))}catch(t){console.log(t)}}g.addEventListener("click",(function(t){if("DIV"===t.target.nodeName||"BUTTON"!==t.target.nodeName)return;if(t.target.classList.contains("current"))return;let e;"<"!==t.target.dataset.btn&&">"!==t.target.dataset.btn&&(e=+t.target.dataset.btn);if("<"===t.target.dataset.btn&&1===u)return;if(">"===t.target.dataset.btn&&u===f)return;"<"===t.target.dataset.btn&&u>1&&(e=u-=1);">"===t.target.dataset.btn&&u<f&&(e=u+=1);u=e;const n=function(){try{return JSON.parse(localStorage.getItem("queryType"))}catch(t){console.log(t)}}().queryType;"getMovies"===n&&(function(t){try{localStorage.setItem("currentPage",JSON.stringify({currentPage:t}))}catch(t){console.log(t)}}(u),E.setPage(e),async function(){i.default.startSpinner();try{const t=await E.fetchMovies();(0,a.insertCreatedObject)(t.results),d(t),i.default.removeSpinner(),p()}catch(t){console.log(t)}}());"getOneMovie"===n&&(E.setPage(u),E.fetchMovieName().then((t=>{b(t),p()})).catch(console.error))}));a=r("j7l8X"),i=r("3oXzi");const y={form:document.querySelector(".form"),falseresultMessage:document.querySelector(".falseresult__message"),gallery:document.querySelector(".gallery"),pagination:document.querySelector(".pagination")};function b(t){if(i.default.startSpinner(),0===t.total_results)return y.falseresultMessage.classList.remove("hide"),void i.default.removeSpinner();t.total_results>0&&((0,a.insertCreatedObject)(t.results),i.default.removeSpinner()),t.total_pages>1&&v("getOneMovie"),d(t),i.default.removeSpinner()}r("5R1Ed");var m={},h=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,O=/^0o[0-7]+$/i,T=parseInt,j="object"==typeof t&&t&&t.Object===Object&&t,w="object"==typeof self&&self&&self.Object===Object&&self,M=j||w||Function("return this")(),N=Object.prototype.toString,q=Math.max,$=Math.min,P=function(){return M.Date.now()};function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function L(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==N.call(t)}(t))return NaN;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");var n=_.test(t);return n||O.test(t)?T(t.slice(2),n?2:8):S.test(t)?NaN:+t}m=function(t,e,n){var r,o,a,i,s,c,l=0,u=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,a=o;return r=o=void 0,l=e,i=t.apply(a,n)}function p(t){return l=t,s=setTimeout(y,e),u?g(t):i}function v(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-l>=a}function y(){var t=P();if(v(t))return b(t);s=setTimeout(y,function(t){var n=e-(t-c);return f?$(n,a-(t-l)):n}(t))}function b(t){return s=void 0,d&&r?g(t):(r=o=void 0,i)}function m(){var t=P(),n=v(t);if(r=arguments,o=this,c=t,n){if(void 0===s)return p(c);if(f)return s=setTimeout(y,e),g(c)}return void 0===s&&(s=setTimeout(y,e)),i}return e=L(e)||0,x(n)&&(u=!!n.leading,a=(f="maxWait"in n)?q(L(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},m.flush=function(){return void 0===s?i:b(P())},m};const E=new(0,o.default);E.setPage(function(){try{const t=JSON.parse(localStorage.getItem("currentPage"));return t?t.currentPage:1}catch(t){console.log(t)}}()),v("getMovies"),async function(){i.default.startSpinner();try{const t=await E.fetchMovies(),e=await E.fetchGenres();void 0===(0,s.getGenre)()&&(0,s.saveGenre)(e),(0,a.insertCreatedObject)(t.results),t.total_pages>1&&d(t),i.default.removeSpinner()}catch(t){console.log(t)}}(),y.form.addEventListener("submit",(async function(t){t.preventDefault(),y.falseresultMessage.classList.add("hide");const e=t.currentTarget.elements.search.value;try{E.setPage(1),E.setQuery(e);b(await E.fetchMovieName())}catch(t){console.log(t)}})),y.form.addEventListener("input",m((function(t){""===t.target.value&&y.falseresultMessage.classList.add("hide")}),300));document.querySelector(".gallery").addEventListener("click",c.onCardFilmClick),l.scrollUp.addEventListener("click",l.smoothScrollToBottomPage);
//# sourceMappingURL=index.57beae5e.js.map
