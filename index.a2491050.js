class t{async fetchMovies(){const t=await fetch(`${this.BASE_URL}${this.MAIN_PAGE_URL}?api_key=${this.KEY}&page=${this.page}`);return await t.json()}async fetchGenres(){const t=await fetch(`${this.BASE_URL}${this.GENRE_URL}?api_key=${this.KEY}`);return(await t.json()).genres}getPage(){return this.page}setPage(t){this.page=t}constructor(){this.page=1,this.BASE_URL="https://api.themoviedb.org/3/",this.MAIN_PAGE_URL="trending/movie/day",this.KEY="9d0cbfdf54c935b25322d86e1e3b7dd0",this.INFO_URL="movie/{movie_id}",this.SEARCH_URL="search/movie",this.GENRE_URL="/genre/movie/list"}}const e={gallery:document.querySelector(".gallery")};function n(t){const n=function(t){return t.reduce(((t,e)=>t+function(t){const{title:e,genre_ids:n,poster_path:s,release_date:a}=t;return`\n<li class="film-card">\n  <a href=''>\n    <img class="poster" src="https://image.tmdb.org/t/p/w500${s}" alt="${e}"  />\n\n    <p class="info-title">${e}</p>\n    <div class="info-title info-item">\n      <p class="">${n}\n      </p>\n      <p class="">${a.slice(0,4)}\n      </p>\n    </div>\n  </a>\n</li>\n`}(e)),"")}(t);e.gallery.innerHTML=n}document.body.onload=function(){setTimeout((function(){let t=document.getElementById("page-preloader");t.classList.contains("done")||t.classList.add("done")}),700)};const s=new t;let a,i;function o({page:t=1,total_pages:e}){a=t,i=e,console.log("currentPage",a),console.log("lastPage",i);!function(t,e,n){const s=t.map((t=>0===t?'<li ><div class = "empryBox">...</div></li>':`<li ><button type="button" class = "${t===e?"current":""} ${"<"===t||">"===t?"arrow":""}" data-btn="${t}">${t}</button></li>`)).join("");c.innerHTML=s,c.dataset.lastpage=n}(function(t,e){const n=[];for(let s=t-2;s<=t+2;s+=1)s>=1&&s<=e&&n.push(s);3===n[0]&&n.unshift(2);2===n[0]&&n.unshift(1);n[0]>3&&n.unshift(1,0);n[n.length-1]<e&&n.push(0,e);n[n.length-1]===e-2&&n.push(e-1);n[n.length-1]===e-3&&n.push(e-2);return n.unshift("<"),n.push(">"),n}(a,i),a,i)}const c=document.querySelector(".pagination");c.addEventListener("click",(function(t){if("DIV"===t.target.nodeName||"BUTTON"!==t.target.nodeName)return;if(t.target.classList.contains("current"))return;let e;"<"!==t.target.dataset.btn&&">"!==t.target.dataset.btn&&(e=+t.target.dataset.btn);if("<"===t.target.dataset.btn&&1===a)return;if(">"===t.target.dataset.btn&&a===i)return;"<"===t.target.dataset.btn&&a>1&&(e=a-=1);">"===t.target.dataset.btn&&a<i&&(e=a+=1);a=e,s.setPage(e),async function(){try{const t=await s.fetchMovies();console.log(t),n(t.results),o(t)}catch(t){console.log(t)}}()}));const r=new t;!async function(){try{const t=await r.fetchMovies(),e=await r.fetchGenres();console.log(t),console.log(e),n(t.results),o(t)}catch(t){console.log(t)}}();
//# sourceMappingURL=index.a2491050.js.map
