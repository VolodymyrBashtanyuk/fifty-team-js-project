{"mappings":"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","sources":["src/js/fetchMovies.js","src/js/createOneObject.js","src/js/preLoader.js","src/js/createPagination.js","src/index.js"],"sourcesContent":["export default class theMovieDbApi {\n    constructor(){\n  this.page = 1;\n  this.BASE_URL='https://api.themoviedb.org/3/';\n  this.MAIN_PAGE_URL = 'trending/movie/day';\n  this.KEY = '9d0cbfdf54c935b25322d86e1e3b7dd0';\n  this.INFO_URL = 'movie/{movie_id}';\n  this.SEARCH_URL = 'search/movie';\n  this.GENRE_URL = '/genre/movie/list';\n}\n\nasync fetchMovies(){\n      \n    const fetchRequest = await fetch(`${this.BASE_URL}${this.MAIN_PAGE_URL}?api_key=${this.KEY}&page=${this.page}`);\n    const data = await fetchRequest.json();\n\n    return data;\n    \n}\n\nasync fetchGenres(){\n    const genresRequest = await fetch(`${this.BASE_URL}${this.GENRE_URL}?api_key=${this.KEY}`);\n    const list = await genresRequest.json();\n    return list.genres;\n}\n\ngetPage(){\n    return this.page;\n}\n\nsetPage(newPage){\n    this.page = newPage;\n}\n};","const refs = {\n    gallery:document.querySelector('.gallery')\n}\n\n\nconst imageURL = \"https://image.tmdb.org/t/p/w500\";\nfunction createOneObject(film){\n const {title,genre_ids,poster_path,release_date} = film;\n\nreturn `\n<li class=\"film-card\">\n  <a href=''>\n    <img class=\"poster\" src=\"${imageURL}${poster_path}\" alt=\"${title}\"  />\n\n    <p class=\"info-title\">${title}</p>\n    <div class=\"info-title info-item\">\n      <p class=\"\">${genre_ids}\n      </p>\n      <p class=\"\">${release_date.slice(0,4)}\n      </p>\n    </div>\n  </a>\n</li>\n`};\n\n\n\nfunction generateMarkup (arrayImages){\n\nreturn arrayImages.reduce((acc,film)=>acc + createOneObject(film),\"\");\n};\n\n export  default function insertCreatedObject (arrayImages) {\n  const result = generateMarkup(arrayImages);\n  refs.gallery.innerHTML = result;\n \n\n};\n"," export default document.body.onload = function () {\n    setTimeout (function(){\nlet preloader = document.getElementById('page-preloader');\nif(!preloader.classList.contains(\"done\")){\n    preloader.classList.add('done')\n}\n    },700)\n}","import theMovieDbApi from \"./fetchMovies\";\nconst movieDbApi = new theMovieDbApi();\nimport insertCreatedObject from './createOneObject'\n\nlet currentPage;\nlet lastPage;\n\n\nfunction createPagination({ page: current = 1, total_pages: last }) {\n    currentPage = current;\n    lastPage = last\n    console.log('currentPage', currentPage);\n    console.log('lastPage',lastPage);\n    // const {page:currentPage = 1, tota_pages:lastPage} = response\n    const dataSet = createArr(currentPage, lastPage)\n renderPagination(dataSet, currentPage, lastPage)\n}\n\nconst paginationEl = document.querySelector('.pagination')\npaginationEl.addEventListener('click', onPaginationClick)    \n\nfunction createArr(start, end) {\n    const res = [];\n\n    for (let i = start - 2; i <= start + 2; i +=1){\n        if (i >= 1 && i <= end) {\n           res.push(i) \n        }\n    }\n\n    if (res[0] === 3) res.unshift(2)\n    if (res[0] === 2) res.unshift(1)\n    if (res[0] > 3) res.unshift(1, 0)\n\n    if (res[res.length - 1] < end) res.push(0,end)\n    if (res[res.length - 1] === end - 2) res.push(end - 1)\n    if (res[res.length - 1] === end - 3) res.push(end - 2)\n\n    res.unshift('<')\n    res.push('>')\n    return res;\n}\n\n\nfunction renderPagination(elems, current, lastPage) {\n    const markup = elems.map((index) => {\n        if (index === 0) {\n    return `<li ><div class = \"empryBox\">...</div></li>`    \n        }\n    \n    return `<li ><button type=\"button\" class = \"${index === current ? 'current' : ''} ${(index === '<') || (index === '>') ? 'arrow' : ''}\" data-btn=\"${index}\">${index}</button></li>`\n    }).join('')\n\n    // const paginationMarkup = `<ul class=\"pagination\">${markup}</ul>`\n\n    // gallery.insertAdjacentHTML('afterend',paginationMarkup)\n    paginationEl.innerHTML = markup;\n    paginationEl.dataset.lastpage = lastPage\n}\n\n\nfunction onPaginationClick(e) {\n    // lastPage = e.currentTarget.dataset.lastpage\n    // console.log(lastPage);\n    // console.log(e.target.nodeName);\n    if (e.target.nodeName === 'DIV' || e.target.nodeName !== 'BUTTON') return\n    \n    if (e.target.classList.contains('current')) return\n\n    let nextPage;\n    \n    if (e.target.dataset.btn !== '<' && e.target.dataset.btn !== '>') nextPage = +e.target.dataset.btn;\n    \n    if (e.target.dataset.btn === '<' && currentPage === 1) return\n    if (e.target.dataset.btn === '>' && currentPage === lastPage) return\n\n    if (e.target.dataset.btn === '<' && currentPage > 1) {\n        nextPage = currentPage -= 1\n    }\n    \n    if (e.target.dataset.btn === '>' && currentPage < lastPage) {\n        nextPage = currentPage += 1\n    }\n    \n    currentPage = nextPage\n    // console.log('currentPage', currentPage);\n    // console.log('nextPage', nextPage);\n    \n    movieDbApi.setPage(nextPage)\n    movies();\n    // renderPagination(createArr(nextPage, lastPage), nextPage)\n\n}\n\nasync function movies(){\n    try{\n       const response = await movieDbApi.fetchMovies();\n       console.log(response)\n       insertCreatedObject(response.results)\n    createPagination(response)\n        \n    }catch(error){\n        console.log(error)\n    };\n};\n\n\nexport {createPagination}\n","import theMovieDbApi from \"./js/fetchMovies\";\nimport insertCreatedObject from './js/createOneObject'\nimport preLoader from './js/preLoader'\nimport {createPagination} from \"./js/createPagination\"\nconst movieDbApi = new theMovieDbApi();\n\n\nasync function movies(){\n    try{\n       const response = await movieDbApi.fetchMovies();\n       const genreResponse = await movieDbApi.fetchGenres();\n       console.log(response);\n       console.log(genreResponse);\n       insertCreatedObject(response.results)\n    createPagination(response)\n        \n    }catch(error){\n        console.log(error)\n    };\n};\n\nmovies();\n"],"names":["$16230cf6cab73dd4$export$2e2bcd8739ae039","async","fetchRequest","fetch","this","BASE_URL","MAIN_PAGE_URL","KEY","page","json","genresRequest","GENRE_URL","genres","getPage","setPage","newPage","constructor","INFO_URL","SEARCH_URL","$00cc769181aa367b$var$refs","gallery","document","querySelector","$00cc769181aa367b$export$2e2bcd8739ae039","arrayImages","result","reduce","acc","film","title","genre_ids","poster_path","release_date","slice","$00cc769181aa367b$var$createOneObject","$00cc769181aa367b$var$generateMarkup","innerHTML","body","onload","setTimeout","preloader","getElementById","classList","contains","add","$b3d98145edb979e9$var$movieDbApi","$b3d98145edb979e9$var$currentPage","$b3d98145edb979e9$var$lastPage","$b3d98145edb979e9$export$7f3155e3cda021fd","current","total_pages","last","console","log","elems","lastPage1","markup","map","index","join","$b3d98145edb979e9$var$paginationEl","dataset","lastpage","$b3d98145edb979e9$var$renderPagination","start","end","res","i","push","unshift","length","$b3d98145edb979e9$var$createArr","addEventListener","e","target","nodeName","nextPage","btn","response","fetchMovies","results","error","$b3d98145edb979e9$var$movies","$1f0dc3b9307be026$var$movieDbApi","genreResponse","fetchGenres","$1f0dc3b9307be026$var$movies"],"version":3,"file":"index.a2491050.js.map"}